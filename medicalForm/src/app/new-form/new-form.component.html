<div class="main container-fluid">
    <div class="row">
        <div class="col-md-6 heading">
            <div class="">
                <img src="../../assets/full_logo.png" class="logo">
            </div>
        </div>
        <div class="col-md-6 headingText">
            <h2>Platinum Rail Services - Medical Assessment Form</h2>
        </div>
    </div>
    <!-- <div class=""> -->

    <div class="form-one" [hidden]="hideFirstForm">
        <app-old-form (oldData)="newOldData($event)"></app-old-form>
    </div>
    <!-- </div> -->

    <div id="accordianNew" [hidden]="hideSecondForm">
        <div class="single_accordion">
            <div class="single_accordion_title collapsed" id="headingNew" data-toggle="collapse"
                data-target="#collapseNew" aria-expanded="true" aria-controls="collapse">
                MEDICAL ASSESSMENT RECORD - NETWORK RAIL
            </div>
            <div id="collapseNew" class="collapse single_accordion_content" aria-labelledby="headingNew"
                data-parent="#accordianNew">
                <div class="single_accordion_content_inner">
                    <form class="induction_pack_component" [formGroup]="form1">
                        <div class="row">
                            <div class="col-md-6">
                                <mat-form-field>
                                    <input formControlName="name" (ngModelChange)="onValueChange()" matInput
                                        placeholder="First name" required>
                                </mat-form-field>

                            </div>

                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="idConfirmed" placeholder="ID Confirmed"
                                        (selectionChange)="idChanged($event);onValueChange()" required multiple>
                                        <mat-option *ngFor="let item of idConfirmList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-12" *ngIf="showSpecifyOthers">
                                <mat-form-field>
                                    <input formControlName="idConfirmOther" matInput
                                        placeholder="Please Specify the ID confirmed" required>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <!-- <mat-form-field>
                                    <input matInput (dateChange)="onValueChange()" [matDatepicker]="picker"
                                        formControlName="dob" placeholder="Choose a date" required>
                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                    <mat-datepicker #picker></mat-datepicker>
                                </mat-form-field> -->
                                <app-date-picker (finalizedDate)="finalDate($event, 'form1', 'dob')"
                                    (dateChange)="onValueChange()">

                                </app-date-picker>
                            </div>

                            <div class="col-md-6">
                                <mat-form-field>
                                    <input formControlName="natInstNo" matInput placeholder="National Insurance No.">
                                </mat-form-field>
                            </div>

                        </div>

                        <div class="row">

                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="currentSenCard" placeholder="Current Sentinel Card?">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-6">
                                <mat-form-field>
                                    <input formControlName="sentinalNo" matInput placeholder="Sentinel No.">
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <mat-form-field>
                                    <input formControlName="additionalComments" matInput
                                        placeholder="Additional Comments">
                                </mat-form-field>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="single_accordion">
            <div class="single_accordion_title collapsed" id="headingOne" data-toggle="collapse"
                data-target="#collapseOneNew" aria-expanded="true" aria-controls="collapseOneNew">
                GENERAL HEALTH
            </div>
            <form [formGroup]="generalHealth">
                <div id="collapseOneNew" class="collapse single_accordion_content" aria-labelledby="headingOne"
                    data-parent="#accordianNew">
                    <div class="single_accordion_content_inner">
                        <div class="row">
                            <div class="col-md-6">
                                <mat-form-field>
                                    <input (ngModelChange)="checkBp()" formControlName="bp1"
                                        (blur)="bpBlurred($event,'reading1')" matInput
                                        placeholder="Blood Pressure - First Reading (mm/Hg)">
                                </mat-form-field>
                            </div>

                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select (selectionChange)="checkBp(); completeAsFailReferToGP()"
                                        formControlName="pulse1" placeholder="Pulse - First Reading">
                                        <mat-option *ngFor="let item of pulseList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="row bgColor checkRow">
                            <div class="col-md-6 col-12 text-center  text-danger">
                                <b>Please enter 2nd and 3rd reading if Blood Pressure > 160/95 (mm/Hg)</b>
                            </div>
                            <div class="col-md-3 col-6 d-flex align-items-center">
                                <mat-checkbox (change)="checkboxChange($event)" [checked]="isChecked ? true : null">2nd
                                    Test</mat-checkbox>
                            </div>
                            <div class="col-md-3 col-6 d-flex align-items-center">
                                <mat-checkbox (change)="checkboxChange2($event)" [checked]="isChecked2 ? true : null">
                                    3rd Test</mat-checkbox>
                            </div>

                        </div>


                        <div class="row" *ngIf="showSecond">

                            <div class="col-md-6">
                                <mat-form-field>
                                    <input [readonly]="secondTestDisabled" formControlName="bp2"
                                        (blur)="bpBlurred($event,'reading2')" matInput
                                        placeholder="Blood Pressure - Second Reading (mm/Hg)">
                                </mat-form-field>
                            </div>

                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select (selectionChange)="completeAsFailReferToGP()" formControlName="pulse2"
                                        placeholder="Pulse - Second Reading">
                                        <mat-option [disabled]="secondTestDisabled" *ngFor="let item of pulseList"
                                            [value]="item">
                                            {{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="row" *ngIf="showThird">

                            <div class="col-md-6">
                                <mat-form-field>
                                    <input [readonly]="thirdTestDisabled" formControlName="bp3"
                                        (blur)="bpBlurred($event,'reading3')" matInput
                                        placeholder="Blood Pressure - Third Reading (mm/Hg)">
                                </mat-form-field>
                            </div>

                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select (selectionChange)="completeAsFailReferToGP()" formControlName="pulse3"
                                        placeholder="Pulse - Third Reading">
                                        <mat-option [disabled]="thirdTestDisabled" *ngFor="let item of pulseList"
                                            [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <mat-form-field>
                                    <mat-select formControlName="height" placeholder="Height"
                                        (selectionChange)="calcBmi($event)" required>
                                        <mat-option *ngFor="let item of heightList" [value]="item">{{item}} cm
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-4">
                                <mat-form-field>
                                    <mat-select formControlName="weight" placeholder="Weight"
                                        (selectionChange)="calcBmi($event)" required>
                                        <mat-option *ngFor="let item of weightList" [value]="item">{{item}} kg
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-4">
                                <mat-form-field>
                                    <input formControlName="bmi" value="{{bmi}}" matInput placeholder="BMI">
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row" *ngIf="bmi && bmi > 33">
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="mobility" placeholder="Mobility">
                                        <mat-option *ngFor="let item of satisfactory" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="fitness" placeholder="Fitness">
                                        <mat-option [value]="'Good'">Good</mat-option>
                                        <mat-option [value]="'Poor'">Poor</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row" *ngIf="bmi && bmi < 19">
                            <div class="col-md-12">
                                <label>Do you consider your diet to be a normal, healthy diet?</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiNormalDiet" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12">
                                <label>Have you noticed any unexplained or sudden changes in their weight? </label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiChangesWeight" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12">
                                <label>have you ever suffered from gastric symptoms such as discomfort or
                                    diarrhoea</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiGastric" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12">
                                <div class="col-12 text-center bgColor">
                                    <b>Do you suffer from any of the following;</b>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <label>Fatigue</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiFatigue" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-4">
                                <label>Light-headedness</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiLightHeadedness" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-4">
                                <label>Dizziness</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiDizziness" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-4">
                                <label>Nausea</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiNausea" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-4">
                                <label>Clammy skin</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiClammySkin" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-4">
                                <label>Depression</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiDepression" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-4">
                                <label>Loss of Consciousness</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiLossOfConsciousness" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-4">
                                <label>Blurred vision</label>
                                <mat-form-field>
                                    <mat-select formControlName="blurredVision" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>


                        <div class="row" *ngIf="bmi && bmi > 30">
                            <div class="col-md-12">
                                <label>Do you become breathless after climbing a flight of stairs?</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiStairs"
                                        (selectionChange)="bmiQuestions($event,'bmiStairs')" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12" *ngIf="bmiStairsDetails">
                                <mat-form-field>
                                    <textarea matInput placeholder="Additional Details"
                                        formControlName="bmiStairsDetails"></textarea>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12">
                                <label>Do you become breathless when hurrying or walking up a slight hill?</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiHill"
                                        (selectionChange)="bmiQuestions($event,'bmiHill')" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12" *ngIf="bmiHillDetails">
                                <mat-form-field>
                                    <textarea matInput placeholder="Additional Details"
                                        formControlName="bmiHillDetails"></textarea>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12">
                                <label>When walking on level ground, do you walk slower than others your age or have to
                                    stop for a breather?</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiWalk"
                                        (selectionChange)="bmiQuestions($event,'bmiWalk')" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12" *ngIf="bmiWalkDetails">
                                <mat-form-field>
                                    <textarea matInput placeholder="Additional Details"
                                        formControlName="bmiWalkDetails"></textarea>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12">
                                <label>What exercise do you do that leaves you out of breath?</label>
                                <mat-form-field>
                                    <textarea matInput placeholder="Details"
                                        formControlName="bmiExerciseDetails"></textarea>
                                </mat-form-field>
                                <!-- <mat-form-field>
                                    <mat-select formControlName="bmiExercise" (selectionChange)="bmiQuestions($event,'bmiExercise')" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field> -->
                            </div>

                            <!-- <div class="col-md-12" *ngIf="bmiExerciseDetails">
                                <mat-form-field>
                                    <textarea matInput placeholder="Additional Details" formControlName="bmiExerciseDetails"></textarea>
                                </mat-form-field>
                            </div> -->

                            <div class="col-md-12">
                                <label>Do you wake on a morning feeling refreshed?</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiRefreshed"
                                        (selectionChange)="bmiQuestions($event,'bmiRefreshed')" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12" *ngIf="bmiRefreshedDetails">
                                <mat-form-field>
                                    <textarea matInput placeholder="Additional Details"
                                        formControlName="bmiRefreshedDetails"></textarea>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12">
                                <label>Has anyone ever told you they have observed you going for periods without
                                    breathing whilst you are asleep?</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiBreathless"
                                        (selectionChange)="bmiQuestions($event,'bmiBreathless')" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12" *ngIf="bmiBreathlessDetails">
                                <mat-form-field>
                                    <textarea matInput placeholder="Additional Details"
                                        formControlName="bmiBreathlessDetails"></textarea>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12">
                                <label>Do you wake up with a sore throat or headache?</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiHeadache"
                                        (selectionChange)="bmiQuestions($event,'bmiHeadache')" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12" *ngIf="bmiHeadacheDetails">
                                <mat-form-field>
                                    <textarea matInput placeholder="Additional Details"
                                        formControlName="bmiHeadacheDetails"></textarea>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12">
                                <label>Do you snore?</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiSnore"
                                        (selectionChange)="bmiQuestions($event,'bmiSnore')" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12" *ngIf="bmiSnoreDetails">
                                <mat-form-field>
                                    <textarea matInput placeholder="Additional Details"
                                        formControlName="bmiSnoreDetails"></textarea>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12">
                                <label>Do you feel excessively tired during day?</label>
                                <mat-form-field>
                                    <mat-select formControlName="bmiTired"
                                        (selectionChange)="bmiQuestions($event,'bmiTired')" placeholder="Select">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-md-12" *ngIf="bmiTiredDetails">
                                <mat-form-field>
                                    <textarea matInput placeholder="Additional Details"
                                        formControlName="bmiTiredDetails"></textarea>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <mat-form-field>
                                    <mat-select (selectionChange)="completeAsFailReferToGP()"
                                        formControlName="pulseRhythm" placeholder="Pulse Rhythm">
                                        <mat-option *ngFor="let item of normality" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-4">
                                <mat-form-field>
                                    <mat-select formControlName="glucose" placeholder="Urine Analysis - Glucose">
                                        <mat-option *ngFor="let item of urinanalysis" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-4">
                                <mat-form-field>
                                    <mat-select formControlName="protein" placeholder="Urine Analysis - Protein">
                                        <mat-option *ngFor="let item of urinanalysis" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-12 text-center bgColor">
                                    <b>Blood Pressure</b>
                                </div>
                                <div class="d-flex">
                                    <div class="col-6 p-0 d-flex justify-content-center">
                                        <table class="showTblLines">
                                            <tr>
                                                <td>
                                                    < 90/60 </td>
                                            </tr>
                                            <tr>
                                                <td>90/60 - 140/90</td>
                                            </tr>
                                            <tr>
                                                <td>140/90 - 160/95</td>
                                            </tr>
                                            <tr>
                                                <td>160/95 - 180/100</td>
                                            </tr>
                                            <tr>
                                                <td>>180/100</td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-6 d-flex justify-content-center">
                                        <table class="showTblLines">
                                            <tr *ngFor="let data of bpArray; let i=index">
                                                <td>
                                                    <input type="checkbox" name="checkButton"
                                                        [attr.checked]="data.checked" [value]="data.value"
                                                        (change)="onCheckboxChange($event)" />
                                                    {{data.value}}
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class='row'>
                            <div class="col-md-12">
                                <div class="col-12 text-center bgColor">
                                    <b>Passed Assessment For</b>
                                </div>
                                <div class="col-md-12">
                                    <label>Balance, Mobility and Co-ordination?</label>
                                    <mat-form-field>
                                        <mat-select formControlName="balanceNMobility" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="col-md-12">
                                    <label>Alertness & Psychological Wellbeing?</label>
                                    <mat-form-field>
                                        <mat-select formControlName="alertnessNwellbeing" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-12">
                                    <label>Speech and Ability to Communicate?</label>
                                    <mat-form-field>
                                        <mat-select formControlName="speech" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="row" *ngIf="doYouSuffer">
                            <div class="col-md-12">
                                <div class="col-12 text-center bgColor">
                                    <b>Do you suffer from any of the following;</b>
                                </div>
                            </div>

                                <div class="col-md-4">
                                    <label>Fatigue</label>
                                    <mat-form-field>
                                        <mat-select formControlName="fatigue" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="col-md-4">
                                    <label>Light-headedness</label>
                                    <mat-form-field>
                                        <mat-select formControlName="lightHeadedness" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="col-md-4">
                                    <label>Dizziness</label>
                                    <mat-form-field>
                                        <mat-select formControlName="dizziness" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="col-md-4">
                                    <label>Nausea</label>
                                    <mat-form-field>
                                        <mat-select formControlName="nausea" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="col-md-4">
                                    <label>Clammy skin</label>
                                    <mat-form-field>
                                        <mat-select formControlName="clammySkin" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="col-md-4">
                                    <label>Depression</label>
                                    <mat-form-field>
                                        <mat-select formControlName="depression" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="col-md-4">
                                    <label>Loss of Consciousness</label>
                                    <mat-form-field>
                                        <mat-select formControlName="lossOfConsciousness" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="col-md-4">
                                    <label>Blurred vision</label>
                                    <mat-form-field>
                                        <mat-select formControlName="blurredVision" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 ">
                                <div class="col-12 bgColor text-center">
                                    <b>Advice Given</b>
                                </div>
                                <div class="col-12">
                                    <mat-form-field>
                                        <mat-select formControlName="adviceGiven"
                                            (selectionChange)="adviceGivenChanged($event)" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                <div class="col-12" *ngIf="showAdviceYes">
                                    <mat-form-field>
                                        <mat-select formControlName="adviceGivenYes" placeholder="Select" multiple>
                                            <mat-option *ngFor="let item of ifYes" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                            </div>
                            <div class="col-md-6 ">
                                <div class="col-12 bgColor text-center">
                                    <b>Letters Issued</b>
                                </div>
                                <div class="col-12">
                                    <mat-form-field>
                                        <mat-select formControlName="lettersIssued"
                                            (selectionChange)="lettersIssuedChanged($event)" placeholder="Select">
                                            <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                <div class="col-12" *ngIf="showlettersIssuedYes">
                                    <mat-form-field>
                                        <mat-select formControlName="lettersIssuedYes" placeholder="Select" multiple>
                                            <mat-option *ngFor="let item of ifYes" [value]="item">{{item}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <mat-form-field class="">
                                    <input matInput formControlName="additionalComments"
                                        placeholder="Additional Comments">
                                </mat-form-field>
                            </div>
                        </div>


                    </div>
                </div>
            </form>
        </div>

        <div class="single_accordion">
            <div class="single_accordion_title collapsed" id="headingTwo" data-toggle="collapse"
                data-target="#collapseTwoNew" aria-expanded="true" aria-controls="collapseTwoNew">
                VISION ASSESSMENT
            </div>
            <form [formGroup]="visionAssessment">
                <div id="collapseTwoNew" class="collapse single_accordion_content" aria-labelledby="headingTwo"
                    data-parent="#accordianNew">
                    <div class="single_accordion_content_inner">
                        <div class="row">
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="glassesWorn"
                                        (selectionChange)="isGlassesWorn($event.value)" placeholder="Glasses Worn">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="lensesWorn" placeholder="Lenses Worn">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-12 bgColor text-center">
                                <b>Distance Vision</b>
                            </div>
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="dvlUnaided" placeholder="Left(Unaided)">
                                        <mat-option *ngFor="let item of distanceVisionList" [value]="item">6/{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="dvrUnaided" placeholder="Right(Unaided)">
                                        <mat-option *ngFor="let item of distanceVisionList" [value]="item">6/{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row" *ngIf="isGlassWorn">
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="dvlCorrected" placeholder="Left(Corrected)">
                                        <mat-option *ngFor="let item of distanceVisionList" [value]="item">6/{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="dvrCorrected" placeholder="Right(Corrected)">
                                        <mat-option *ngFor="let item of distanceVisionList" [value]="item">6/{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 bgColor text-center">
                                <b>
                                    Vision Standard
                                    6/9 in better eye and 6/12 in the other eye
                                </b>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="visualFields" placeholder="Visual Fields">
                                        <mat-option *ngFor="let item of normality" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="colorVision"
                                        (selectionChange)="fitnessChange($event,'vision')" placeholder="Colour Vision">
                                        <mat-option *ngFor="let item of normality" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 bgColor d-flex justify-content-center align-items-center">
                                Normal Colour Vision
                                17 of 21 plates read correctly
                            </div>
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="plates" placeholder="No. of plates read correctly">
                                        <mat-option *ngFor="let item of platesList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <mat-form-field class="">
                                    <input matInput formControlName="additionalComments"
                                        placeholder="Additional Comments">
                                </mat-form-field>
                            </div>
                        </div>

                    </div>
                </div>
            </form>
        </div>

        <div class="single_accordion">
            <div class="single_accordion_title collapsed" id="Hearing" data-toggle="collapse" data-target="#hearing"
                aria-expanded="true" aria-controls="hearing">
                HEARING
            </div>
            <form [formGroup]="hearingGrp">
                <div id="hearing" class="collapse single_accordion_content" aria-labelledby="Hearing"
                    data-parent="#hearing">
                    <div class="single_accordion_content_inner">
                        <div class="row">

                            <div class="col-12">
                                <mat-form-field>
                                    <mat-select formControlName="earWax" placeholder="Are the ears clear of wax?">
                                        <mat-option *ngFor="let item of yesNo" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="col-12 bgColor text-center">
                                <b>Left Ear</b>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="leftEar500"
                                        (selectionChange)="leftEarChange($event, 500)" placeholder="500">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="leftEar1000"
                                        (selectionChange)="leftEarChange($event, 1000)" placeholder="1000">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="leftEar2000"
                                        (selectionChange)="leftEarChange($event, 2000)" placeholder="2000">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="leftEar3000" placeholder="3000">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="leftEar4000" placeholder="4000">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="leftEar6000" placeholder="6000">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="leftEar8000" placeholder="8000">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>


                        <div class="row">
                            <div class="col-12 bgColor text-center">
                                <b> Right Ear </b>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="rightEar500"
                                        (selectionChange)="rightEarChange($event, 500)" placeholder="500">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="rightEar1000"
                                        (selectionChange)="rightEarChange($event, 1000)" placeholder="1000">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="rightEar2000"
                                        (selectionChange)="rightEarChange($event, 2000)" placeholder="2000">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="rightEar3000" placeholder="3000">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="rightEar4000" placeholder="4000">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="rightEar6000" placeholder="6000">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <mat-select formControlName="rightEar8000" placeholder="8000">
                                        <mat-option *ngFor="let item of hearingList" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-3">
                                <mat-form-field>
                                    <input matInput placeholder="Left ear 500" value="{{lear500}}" disabled>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <input matInput placeholder="Left ear 1000" value="{{lear1000}}" disabled>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <input matInput placeholder="Left ear 2000" value="{{lear2000}}" disabled>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <input matInput placeholder="Left ear total" value="{{learTotal}}" disabled>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-3">
                                <mat-form-field>
                                    <input matInput placeholder="Right ear 500" value="{{rear500}}" disabled>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <input matInput placeholder="Right ear 1000" value="{{rear1000}}" disabled>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <input matInput placeholder="Right ear 2000" value="{{rear2000}}" disabled>
                                </mat-form-field>
                            </div>
                            <div class="col-md-3">
                                <mat-form-field>
                                    <input matInput placeholder="Right ear total" value="{{rearTotal}}" disabled>
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <mat-form-field class="">
                                    <input matInput formControlName="additionalComments"
                                        placeholder="Additional Comments">
                                </mat-form-field>
                            </div>
                        </div>

                    </div>
                </div>
            </form>

        </div>

        <div class="single_accordion">
            <div class="single_accordion_title collapsed" id="headingThree" data-toggle="collapse"
                data-target="#collapseThreeNew" aria-expanded="true" aria-controls="collapseThreeNew">
                FITNESS ASSESSMENT SUMMARY
            </div>
            <form [formGroup]="fitnessGrp">
                <div id="collapseThreeNew" class="collapse single_accordion_content" aria-labelledby="headingThree"
                    data-parent="#accordianNew">
                    <div class="single_accordion_content_inner">
                        <div class="row">
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="generalHealth"
                                        (selectionChange)="fitnessChange($event,'generalHealth')"
                                        placeholder="General Health">
                                        <mat-option *ngFor="let item of satisfactory" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="visual"
                                        (selectionChange)="fitnessChange($event,'visual')" placeholder="Visual Acuity">
                                        <mat-option *ngFor="let item of satisfactory" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="colorVision"
                                        (selectionChange)="fitnessChange($event,'colourVision')"
                                        placeholder="Colour Vision">
                                        <mat-option *ngFor="let item of satisfactory" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">
                                <mat-form-field>
                                    <mat-select formControlName="hearing"
                                        (selectionChange)="fitnessChange($event,'hearing')" placeholder="Hearing">
                                        <mat-option *ngFor="let item of satisfactory" [value]="item">{{item}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <mat-form-field>
                                    <textarea formControlName="addInfo" placeholder="Additional Information"
                                        matInput></textarea>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class="single_accordion">
            <div class="single_accordion_title collapsed" id="headingFour" data-toggle="collapse"
                data-target="#collapseFourNew" aria-expanded="true" aria-controls="collapseFourNew">
                MEDICAL EXAMINARS RECOMMENDATION
            </div>
            <form [formGroup]="medicalAssess">
                <div id="collapseFourNew" class="collapse single_accordion_content" aria-labelledby="headingFour"
                    data-parent="#accordianNew">
                    <div class="single_accordion_content_inner">
                        <div class="row">

                            <div class="col-12">

                                <div class="col-md-6">
                                    <input type="checkbox" name="fit" [attr.checked]="" value="Fit"
                                        (change)="fit($event)" />
                                    Fit
                                </div>

                                <div class="col-md-12">
                                    <mat-form-field>
                                        <mat-select formControlName="level" placeholder="Select">
                                            <mat-option [value]="'level1'" [disabled]="disableLevel">Level 1
                                            </mat-option>
                                            <mat-option [value]="'level3'">Level 3</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-6">
                                    <input type="checkbox" name="letterToGp" [attr.checked]="letterToGpCheck" [value]="letterToGp"
                                        (change)="letterToGp($event)" />
                                    Letter To GP/Opticion
                                </div>

                                <div class='col-md-12'>
                                    <mat-form-field>
                                        <input matInput placeholder="Reason" formControlName="reason">
                                    </mat-form-field>
                                </div>

                                <div class="col-md-6">
                                    <input type="checkbox" name="certificate" [attr.checked]=""
                                        value="MonthsCertificate" (change)="sixMonth($event)" />
                                    6 Months Certificate
                                </div>

                                <div class="col-md-6">
                                    (Blood pressure 165/95-180/100)
                                </div>

                                <div class="col-md-6">
                                    <input type="checkbox" name="referToOH" [attr.checked]="" [value]="referToOH"
                                        (change)="referToOH($event)" />
                                    Refer To OH Physician
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <mat-form-field>
                                    <input formControlName="examinerName" matInput
                                        placeholder="Medical Examinar's Name">
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">
                                <!-- <mat-form-field>
                                    <input matInput [matDatepicker]="picker1" formControlName="examinerDate"
                                        placeholder="Choose a date">
                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </mat-form-field> -->
                                <app-date-picker (finalizedDate)="finalDate($event, 'medicalAssess', 'examinerDate')"
                                    (dateChange)="onValueChange()">

                                </app-date-picker>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label>SIGNATURE</label>
                                <div class="signCanvas" *ngIf="!examinarSign" (click)="redirect('examinar')">
                                    Click to sign
                                </div>

                                <div class="signCanvas" *ngIf="examinarSign" (click)="redirect('examinar')">
                                    Signature attached.
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12">
                                <mat-form-field>
                                    <textarea matInput formControlName="reasonForReferral"
                                        placeholder="Reason for referral"></textarea>
                                </mat-form-field>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <mat-form-field>
                                    <input formControlName="checkedBy" matInput placeholder="Checked By">
                                </mat-form-field>
                            </div>
                            <div class="col-md-6">
                                <!-- <mat-form-field>
                                    <input matInput [matDatepicker]="picker2" formControlName="checkedByDate"
                                        placeholder="Choose a date">
                                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                    <mat-datepicker #picker2></mat-datepicker>
                                </mat-form-field> -->
                                <app-date-picker (finalizedDate)="finalDate($event, 'medicalAssess', 'checkedByDate')"
                                    (dateChange)="onValueChange()">

                                </app-date-picker>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <label>SIGNATURE</label>
                                <div class="signCanvas" *ngIf="!checkedBy" (click)="redirect('checkedby')">
                                    Click to sign
                                </div>

                                <div class="signCanvas" *ngIf="checkedBy" (click)="redirect('checkedby')">
                                    Signature attached.
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <mat-form-field class="">
                                    <input matInput formControlName="additionalComments"
                                        placeholder="Additional Comments">
                                </mat-form-field>
                            </div>
                        </div>

                        <div class="row mt-2">
                            <div class="col-12 bgColor text-center">
                                Occupational Health Physician’s Decision
                            </div>
                            <div class="col-md-4">
                                Level
                            </div>
                            <div class="col-md-8">
                                <input type="checkbox" disabled>Level 1
                                <input type="checkbox" disabled>Level 2
                                <input type="checkbox" disabled>Level 3
                                <input type="checkbox" disabled>Level 4
                                <input type="checkbox" disabled>No Level
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-md-4">
                                Risk Assessment Required
                            </div>
                            <div class="col-md-4">
                                Y/N
                            </div>
                            <div class="col-md-4">
                                Reason:
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-md-6">
                                Signature
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="mt-3" [hidden]="hideSecondForm">
        <button [disabled]="submitDisabled" mat-raised-button color="primary" (click)="submit()">Submit</button>
    </div>
</div>


<div *ngIf="loading == true">
    <div id="loader-wrapper">
        <div class="lds-dual-ring"></div>
    </div>
</div>